CMAKE_MINIMUM_REQUIRED( VERSION 3.3 )

PROJECT( ${BS_NETWORK_LIB_NAME} )

FILE(GLOB SOURCES *.cpp)
file(GLOB HEADERS *.h)

SET(GENERATED_PROTO_FILES
   ${API_PERFORMANCE_PROTO_HEADERS}
   ${API_PERFORMANCE_PROTO_SOURCES}
   ${API_SESSION_PROTO_HEADERS}
   ${API_SESSION_PROTO_SOURCES}
   ${API_SOCKET_PROTO_HEADERS}
   ${API_SOCKET_PROTO_SOURCES}
   ${API_USER_PROTO_HEADERS}
   ${API_USER_PROTO_SOURCES}
   ${BS_COMMON_ENUMS_PROTO_HEADERS}
   ${BS_COMMON_ENUMS_PROTO_SOURCES}
   ${BS_COMMUNICATION_PROTO_HEADERS}
   ${BS_COMMUNICATION_PROTO_SOURCES}
   ${BS_STORAGE_PROTO_HEADERS}
   ${BS_STORAGE_PROTO_SOURCES}
   ${BS_TERMINAL_API_PROTO_HEADERS}
   ${BS_TERMINAL_API_PROTO_SOURCES}
   ${CELER_API_ACCOUNTS_PROTO_HEADERS}
   ${CELER_API_ACCOUNTS_PROTO_SOURCES}
   ${CELER_API_USER_ACCOUNT_PROTO_HEADERS}
   ${CELER_API_USER_ACCOUNT_PROTO_SOURCES}
   ${ENUMS_PROTO_HEADERS}
   ${ENUMS_PROTO_SOURCES}
   ${LOGIN_PROTO_HEADERS}
   ${LOGIN_PROTO_SOURCES}
   ${MARKET_DATA_PROTO_HEADERS}
   ${MARKET_DATA_PROTO_SOURCES}
   ${MARKET_ENUMS_PROTO_HEADERS}
   ${MARKET_ENUMS_PROTO_SOURCES}
   ${MARKET_STATS_PROTO_HEADERS}
   ${MARKET_STATS_PROTO_SOURCES}
   ${MARKET_SECURITY_DEFINITION_PROTO_HEADERS}
   ${MARKET_SECURITY_DEFINITION_PROTO_SOURCES}
   ${NETTY_PROTO_HEADERS}
   ${NETTY_PROTO_SOURCES}
   ${ORDER_PROTO_HEADERS}
   ${ORDER_PROTO_SOURCES}
   ${QUOTE_PROTO_HEADERS}
   ${QUOTE_PROTO_SOURCES}
   ${SIGN_PROTO_HEADERS}
   ${SIGN_PROTO_SOURCES}
   ${STATIC_USER_PROPERTY_PROTO_HEADERS}
   ${STATIC_USER_PROPERTY_PROTO_SOURCES}
   ${CELER_PIGGYBANK_API_ENUMS_PROTO_HEADERS}
   ${CELER_PIGGYBANK_API_ENUMS_PROTO_SOURCES}
   ${CELER_PIGGYBANK_API_SUBLEDGER_PROTO_HEADERS}
   ${CELER_PIGGYBANK_API_SUBLEDGER_PROTO_SOURCES}
   ${CELER_BASESERVER_EXCEPTION_PROTO_HEADERS}
   ${CELER_BASESERVER_EXCEPTION_PROTO_SOURCES}
   )

# include root dir for generated proto files
INCLUDE_DIRECTORIES( ${PATH_TO_GENERATED} )

# include subdirs for generated proto files
INCLUDE_DIRECTORIES( ${API_PERFORMANCE_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${API_SESSION_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${API_SOCKET_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${API_USER_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${BS_COMMON_ENUMS_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${BS_COMMUNICATION_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${BS_STORAGE_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${BS_TERMINAL_API_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${CELER_API_ACCOUNTS_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${CELER_API_USER_ACCOUNT_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${ENUMS_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${LOGIN_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${MARKET_DATA_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${MARKET_ENUMS_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${MARKET_STATS_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${MARKET_SECURITY_DEFINITION_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${NETTY_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${ORDER_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${QUOTE_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${STATIC_USER_PROPERTY_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${CELER_PIGGYBANK_API_ENUMS_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${CELER_PIGGYBANK_API_SUBLEDGER_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${CELER_BASESERVER_EXCEPTION_INCLUDE_DIR} )

INCLUDE_DIRECTORIES( ${COMMON_LIB_INCLUDE_DIR} )
INCLUDE_DIRECTORIES( ${WALLET_LIB_INCLUDE_DIR} )

# for bdmenums.h include in ApplicationSettings.h ( ugly :( )
INCLUDE_DIRECTORIES( ${CRYPTO_LIB_INCLUDE_DIR} )

INCLUDE_DIRECTORIES( ${Qt5Network_INCLUDE_DIRS} )
INCLUDE_DIRECTORIES( ${Qt5Core_INCLUDE_DIRS})

ADD_LIBRARY( ${BS_NETWORK_LIB_NAME} ${SOURCES} ${HEADERS} ${GENERATED_PROTO_FILES})
TARGET_LINK_LIBRARIES(${BS_NETWORK_LIB_NAME}
   ${OS_SPECIFIC_LIBS}
   ${COMMON_LIB_NAME}
   ${PROTO_LIB}
   ${ZMQ_LIB}
   ${CPP_WALLET_LIB_NAME} 
   Qt5::Core
   Qt5::Network
   )
