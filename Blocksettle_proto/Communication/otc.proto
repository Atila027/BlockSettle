syntax = "proto3";

package Blocksettle.Communication.Otc;

// Keep in sync with bs::network::ChatOTCSide::Type
enum Side
{
    SIDE_UNDEFINED = 0;
    SIDE_BUY = 1;
    SIDE_SELL = 2;
};

// Keep in sync with bs::network::OTCRangeID::Type
enum Range
{
    RANGE_1_5     = 0;
    RANGE_5_10    = 1;
    RANGE_10_50   = 2;
    RANGE_50_100  = 3;
    RANGE_100_250 = 4;
    RANGE_250PLUS = 5;
};

message Message
{
    message Offer
    {
        Side sender_side = 1;
        int64 amount = 2;
        int64 price = 3;

        // 32 bytes generated by offering side
        bytes random_part1 = 4;
    }

    message Accept
    {
        // Check details here one more time
        Side sender_side = 1;
        int64 amount = 2;
        int64 price = 3;

        // 32 bytes generated by accepting side
        // settlement_id generated as sha256(random_part1 + random_part2)
        bytes random_part2 = 4;
    }

    message Close
    {
    }

    oneof data
    {
        Offer offer = 1;
        Accept accept = 2;
        Close close = 3;
    }
}
