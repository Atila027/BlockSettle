syntax = "proto3";

package Blocksettle.Communication.Otc;

// Keep in sync with bs::network::OTCRangeID::Type
enum Range
{
    RANGE_1_5     = 0;
    RANGE_5_10    = 1;
    RANGE_10_50   = 2;
    RANGE_50_100  = 3;
    RANGE_100_250 = 4;
    RANGE_250PLUS = 5;
};

message Message
{
    message Offer
    {
        int64 amount = 1;
        int64 price = 2;
    }

    message BuyerOffers
    {
        Offer offer = 1;

        // public key of auth address from buying side (33 bytes)
        bytes auth_address_buyer = 2;
    }

    message SellerOffers
    {
        Offer offer = 1;
    }

    message BuyerAccepts
    {
        Offer offer = 1;

        bytes auth_address_buyer = 2;
    }

    message SellerAccepts
    {
        // Check details here one more time
        Offer offer = 1;

        // 32 bytes generated by accepting side
        bytes settlement_id = 2;

        bytes auth_address_seller = 3;

        bytes payin_tx_id = 4;
    }

    message BuyerAcks
    {
    }

    message Close
    {
    }

    oneof data
    {
        BuyerOffers buyer_offers = 1;
        SellerOffers seller_offers = 2;
        BuyerAccepts buyer_accepts = 3;
        SellerAccepts seller_accepts = 4;
        BuyerAcks buyer_acks = 5;
        Close close = 6;
    }
}
